<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>E-Vaulto | Secure Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  background:
    radial-gradient(circle at top left, rgba(0,255,136,0.15), transparent 40%),
    #07090c;
  color: #eaeaea;
  font-family: "Inter","Segoe UI",Arial,sans-serif;
}

.ev-back-btn {
  position: fixed;
  top: 24px;
  left: 24px;
  padding: 10px 18px;
  border-radius: 12px;
  color: #e6e6e6;
  text-decoration: none;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(12px);
}
.ev-back-btn:hover {
  color: #00ff88;
  box-shadow: 0 0 18px rgba(0,255,136,.35);
}

.container {
  max-width: 1000px;
  margin: auto;
  padding: 90px 30px 50px;
}

h1 {
  text-align: center;
  color: #00ff88;
  margin-bottom: 30px;
}

/* ================= FORM ================= */
.note-form {
  background: rgba(255,255,255,0.04);
  border-radius: 10px;
  padding: 24px;
  margin-bottom: 30px;
  display: grid;
  gap: 16px;
  border: 1px solid rgba(255,255,255,0.12);
}

.note-form input,
.note-form textarea {
  background: rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 12px;
  padding: 14px;
  color: #eaeaea;
  resize: vertical;
}

.note-form button {
  padding: 14px;
  border-radius: 12;
  border: none;
  font-weight: 600;
  cursor: pointer;
  background: linear-gradient(135deg,#00ff88,#0fbf6a);
}

/* ================= NOTES ================= */
.notes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
  gap: 18px;
}

.note-card {
  background: rgba(255,255,255,0.04);
  border-radius: 12px;
  padding: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.note-card h3 {
  margin: 0 0 8px;
  color: #00ff88;
}

.note-card small {
  color: #9aa0a6;
}

.delete-btn {
  align-self: flex-end;
  margin-top: 12px;
  background: rgba(255,0,0,.1);
  border: 1px solid rgba(255,0,0,.35);
  color: #ff4d4d;
  padding: 6px 14px;
  border-radius: 12px;
  cursor: pointer;
}
/* Hide edit form by default */
.note-edit {
  display: none;
}

/* Button row */
.note-actions {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

/* =======================
   NOTE ACTION BUTTONS
======================= */

.note-actions {
  display: flex;
  gap: 12px;
  margin-top: 14px;
}

/* Base button */
.note-actions button {
  padding: 8px 16px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border: 1px solid transparent;
  background: rgba(255,255,255,0.06);
  color: #eaeaea;

  backdrop-filter: blur(8px);
  transition:
    background 0.25s ease,
    box-shadow 0.25s ease,
    transform 0.2s ease,
    color 0.25s ease;
}

/* Hover / active shared */
.note-actions button:hover {
  transform: translateY(-1px);
}

.note-actions button:active {
  transform: scale(0.96);
}

/* =======================
   EDIT BUTTON (BLUE)
======================= */
.edit-btn {
  height: 40px;
  border-color: rgba(0,198,255,0.45);
  color: #00c6ff;
}

.edit-btn:hover {
  background: rgba(0,198,255,0.12);
  box-shadow: 0 0 16px rgba(0,198,255,0.45);
}

/* =======================
   SAVE BUTTON (GREEN)
======================= */
.save-btn {
  border-color: rgba(0,255,136,0.45);
  color: #00ff88;
}

.save-btn:hover {
  background: rgba(0,255,136,0.12);
  box-shadow: 0 0 18px rgba(0,255,136,0.5);
}

/* =======================
   CANCEL BUTTON (NEUTRAL)
======================= */
.cancel-btn {
  border-color: rgba(255,255,255,0.25);
  color: #cfcfcf;
}

.cancel-btn:hover {
  background: rgba(255,255,255,0.08);
  box-shadow: 0 0 12px rgba(255,255,255,0.25);
}

/* =======================
   DELETE BUTTON (RED)
======================= */
.delete-btn {
  border-color: rgba(255,0,0,0.45);
  color: #ff4d4d;
  background: rgba(255,0,0,0.08);
}

.delete-btn:hover {
  background: rgba(255,0,0,0.18);
  box-shadow: 0 0 16px rgba(255,0,0,0.45);
}
.adbtn{
  border-radius: 9px;
}

/* =======================
   PERFECT BUTTON ALIGNMENT
======================= */

.note-actions {
  display: flex;
  align-items: center;   /* vertical alignment */
  gap: 12px;
}

/* Make form behave like a button wrapper */
.inline-form {
  display: flex;
  align-items: center;
  margin: 0;
}

/* Normalize ALL buttons */
.note-actions button {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  height: 36px;          /* üîë SAME HEIGHT */
  line-height: 1;        /* üîë remove baseline drift */

  padding: 0 16px;       /* horizontal only */
  border-radius: 12px;

  font-size: 13px;
  font-weight: 500;
}


</style>
</head>

<body>

<a href="/dashboard" class="ev-back-btn">‚Üê Back</a>

<div class="container">
  <h1>Secure Notes</h1>

  <!-- ADD NOTE -->
  <form class="note-form" action="/notes/add" method="POST">
    <input name="title" placeholder="Note title" required>
    <textarea name="content" rows="4" placeholder="Write your note..." required></textarea>
    <button class="adbtn">Add Note</button>
  </form>

  <!-- NOTES LIST -->
  <div class="notes-grid">
    <% if (notes.length === 0) { %>
      <p>No notes yet.</p>
    <% } %>

    <% notes.forEach(note => { %>
      <div class="note-card">

  <!-- VIEW MODE -->
  <div class="note-view" id="view-<%= note.id %>">
    <h3><%= note.title %></h3>
    <p><%= note.content %></p>
    <small><%= note.created_at.toDateString() %></small>

    <div class="note-actions">
      <button class="edit-btn" onclick="enterEdit(<%= note.id %>)">Edit</button>

      <form action="/notes/delete/<%= note.id %>" method="POST">
        <button class="delete-btn">Delete</button>
      </form>
    </div>
  </div>

  <!-- EDIT MODE -->
  <form
    class="note-edit"
    id="edit-<%= note.id %>"
    action="/notes/edit/<%= note.id %>"
    method="POST"
  >
    <input name="title" value="<%= note.title %>" required>
    <textarea name="content" rows="4" required><%= note.content %></textarea>

    <div class="note-actions">
  <button class="edit-btn" onclick="enterEdit(<%= note.id %>)">Edit</button>

  <form action="/notes/delete/<%= note.id %>" method="POST" class="inline-form">
    <button class="delete-btn">Delete</button>
  </form>
</div>


</div>

    <% }) %>
  </div>
</div>

<script>
function enterEdit(id) {
  document.getElementById(`view-${id}`).style.display = "none";
  document.getElementById(`edit-${id}`).style.display = "block";
}

function cancelEdit(id) {
  document.getElementById(`edit-${id}`).style.display = "none";
  document.getElementById(`view-${id}`).style.display = "block";
}
</script>

</body>
</html>
