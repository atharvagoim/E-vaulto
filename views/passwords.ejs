<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Password Manager</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: Inter, Segoe UI, sans-serif;
  background:
    radial-gradient(circle at 20% 10%, rgba(0,255,136,.12), transparent 40%),
    linear-gradient(180deg, #050505, #020202);
  color: #eaeaea;
}

/* =========================
   BACK BUTTON
========================= */
.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  padding: 10px 14px;
  border-radius: 14px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  color: #fff;
  text-decoration: none;
  font-size: 14px;
  backdrop-filter: blur(10px);
  transition: background .25s ease, transform .2s ease;
}

.back-btn:hover {
  background: rgba(255,255,255,.12);
  transform: translateX(-2px);
}

/* =========================
   PAGE
========================= */
.page {
  max-width: 750px;
  margin: 100px auto 60px;
  padding: 0 20px;
  animation: pageIn .8s cubic-bezier(.22,1,.36,1);
}

@keyframes pageIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(.97);
    filter: blur(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

h1 {
  text-align: center;
  color: #00ff88;
  font-size: 34px;
  margin-bottom: 40px;
}

/* =========================
   CARD
========================= */
.card {
  background: linear-gradient(145deg, rgba(18,18,18,.95), rgba(8,8,8,.95));
  border-radius: 22px;
  padding: 22px;
  margin-bottom: 22px;
  border: 1px solid rgba(255,255,255,.06);
  box-shadow: 0 25px 60px rgba(0,0,0,.8);
  transition: transform .3s ease;
}

.card:hover {
  transform: translateY(-4px);
}

/* =========================
   INPUTS & SELECT
========================= */
.card input,
.card select {
  width: 100%;
  padding: 15px;
  margin-bottom: 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  background: #090909;
  color: #fff;
  outline: none;
}

.card input:focus,
.card select:focus {
  border-color: #202020;
  box-shadow: 0 0 0 3px rgba(247, 247, 247, 0.15);
}

/* =========================
   BUTTON
========================= */
button {
  width: 100%;
  padding: 15px;
  border-radius: 16px;
  border: none;
  background: #00ff88;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,255,136,.25);
  transition: transform .2s ease, box-shadow .2s ease;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(0,255,136,.35);
}

/* =========================
   SAVED PASSWORDS
========================= */
.entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
}

.entry-info h3 {
  margin: 0;
}

.entry-info p {
  margin: 6px 0 0;
  color: #aaa;
  font-size: 13px;
}

.password-box {
  display: flex;
  align-items: center;
  gap: 10px;
}

.password-box input {
  width: 140px;
  padding: 8px;
}

.icon-btn {
  background: transparent;
  border: 1px solid rgba(255,255,255,.2);
  padding: 6px 8px;
  border-radius: 10px;
  cursor: pointer;
  color: #00ff88;
}

.danger {
  color: #ff5c5c;
  text-decoration: none;
  font-size: 13px;
}
</style>
</head>

<body>

<a href="/dashboard" class="back-btn">‚Üê Back</a>

<div class="page">
  <h1>Password Manager</h1>

  <!-- ADD PASSWORD -->
  <form action="/passwords/add" method="POST">
    <div class="card" id="addCard">

      <select id="siteSelect" onchange="handleSiteChange()">
        <option value="custom">Custom</option>
        <option value="netflix">Netflix</option>
        <option value="instagram">Instagram</option>
        <option value="facebook">Facebook</option>
        <option value="snap">Snapchat</option>
        <option value="spotify">Spotify</option>
        <option value="apple">Apple ID</option>
        <option value="gmail">Gmail</option>
        <option value="amazon">Amazon Prime</option>
        <option value="microsoft">Microsoft</option>
      </select>

      <input id="customSite" name="site_name" placeholder="Site / App Name" required>
      <input name="login_identifier" placeholder="Username or Email" required>
      <input type="password" name="password" placeholder="Password" required>

      <button id="addBtn">Add Password</button>
    </div>
  </form>

  <!-- PASSWORD LIST -->
  <% passwords.forEach(p => { %>
    <div class="card entry themed-card" data-site="<%= p.site_name.toLowerCase() %>">
      <div class="entry-info">
        <h3><%= p.site_name %></h3>
        <p><%= p.login_identifier %></p>
      </div>

      <div class="password-box">
        <input type="password" value="<%= p.password %>" readonly>
        <button type="button" class="icon-btn" onclick="toggle(this)">üëÅ</button>
        <a href="/passwords/delete/<%= p.id %>" class="danger">Delete</a>
      </div>
    </div>
  <% }) %>
</div>

<script>
const themes = {
  netflix:{name:"Netflix",bg:"#0a0000",accent:"#e50914"},
  instagram:{name:"Instagram",bg:"#140012",accent:"#ff77c8"},
  facebook:{name:"Facebook",bg:"#0a1a2f",accent:"#1877f2"},
  snap:{name:"Snapchat",bg:"#1a1a00",accent:"#ffe600"},
  spotify:{name:"Spotify",bg:"#003b1f",accent:"#1db954"},
  apple:{name:"Apple ID",bg:"#1c1c1c",accent:"#ffffff"},
  gmail:{name:"Gmail",bg:"#1b1b1b",accent:"#ffffff"},
  amazon:{name:"Amazon Prime",bg:"#0f2a44",accent:"#00a8e1"},
  microsoft:{name:"Microsoft",bg:"#1b1b1b",accent:"#ffffff"},
  custom:{name:"",bg:"#0a0a0a",accent:"#00ff88"}
};

const siteSelect = document.getElementById("siteSelect");
const addCard = document.getElementById("addCard");
const addBtn = document.getElementById("addBtn");
const customSite = document.getElementById("customSite");

function handleSiteChange() {
  const theme = themes[siteSelect.value];
  if (!theme) return;

  addCard.style.background = `linear-gradient(145deg, ${theme.bg}, #000)`;
  addCard.style.borderColor = theme.accent;

  addBtn.style.background = theme.accent;
  addBtn.style.boxShadow = `0 4px 12px ${theme.accent}40`;

  if (siteSelect.value !== "custom") {
    customSite.value = theme.name;
    customSite.readOnly = true;
  } else {
    customSite.value = "";
    customSite.readOnly = false;
  }
}

function toggle(btn) {
  const input = btn.previousElementSibling;
  input.type = input.type === "password" ? "text" : "password";
}

function applySavedCardThemes() {
  document.querySelectorAll(".themed-card").forEach(card => {
    const site = card.dataset.site;
    for (const key in themes) {
      if (site.includes(key)) {
        card.style.background = `linear-gradient(145deg, ${themes[key].bg}, #000)`;
        card.style.borderColor = themes[key].accent;
        card.querySelector(".icon-btn").style.color = themes[key].accent;
        break;
      }
    }
  });
}

handleSiteChange();
applySavedCardThemes();
</script>

</body>
</html>
