<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Password Manager</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: Inter, Segoe UI, sans-serif;
  background:
    radial-gradient(circle at 20% 10%, rgba(0,255,136,.12), transparent 40%),
    linear-gradient(180deg, #050505, #020202);
  color: #eaeaea;
}

.page {
  max-width: 750px;
  margin: 80px auto;
  padding: 0 20px;
  animation: pageIn .8s cubic-bezier(.22,1,.36,1);
}

@keyframes pageIn {
  from { opacity:0; transform: translateY(30px) scale(.97); filter: blur(6px); }
  to { opacity:1; transform: translateY(0); filter: blur(0); }
}

h1 {
  text-align: center;
  color: #00ff88;
  font-size: 34px;
  margin-bottom: 40px;
  animation: glow 3s ease-in-out infinite;
}

@keyframes glow {
  50% { text-shadow: 0 0 35px rgba(0,255,136,.6); }
}

/* Card */
.card {
  background: linear-gradient(145deg, rgba(18,18,18,.95), rgba(8,8,8,.95));
  border-radius: 20px;
  padding: 22px;
  margin-bottom: 22px;
  border: 1px solid rgba(255,255,255,.06);
  box-shadow: 0 25px 60px rgba(0,0,0,.8);
  transition: transform .35s ease, box-shadow .35s ease, border .3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 35px 80px rgba(0,0,0,.95);
}

/* Inputs + Select */
.card input, select {
  width: 100%;
  padding: 15px;
  margin-bottom: 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  background: #090909;
  color: #fff;
  outline: none;
}

.card input:focus, select:focus {
  box-shadow: 0 0 0 3px rgba(0,255,136,.15);
}

/* Button */
button {
  width: 100%;
  padding: 16px;
  border-radius: 16px;
  border: none;
  background: #00ff88;
  color: #000;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;

  /* üîΩ MUCH softer glow */
  box-shadow:
    0 4px 12px rgba(0, 255, 136, 0.25);

  transition: background .25s ease, box-shadow .25s ease, transform .2s ease;
}

button:hover {
  box-shadow:
    0 6px 18px rgba(0, 255, 136, 0.35);
}



/* Entry list */
.entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
}

.entry-info h3 {
  margin: 0;
}

.entry-info p {
  margin: 6px 0 0;
  color: #aaa;
  font-size: 13px;
}

.password-box {
  display: flex;
  align-items: center;
  gap: 10px;
}

.password-box input {
  width: 140px;
  padding: 8px;
}

.icon-btn {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.15);
  color: #00ff88; /* default, overridden by theme */
  cursor: pointer;
  font-size: 14px;
  padding: 6px 8px;
  border-radius: 10px;

  /* ‚ùå no shadow, no glow */
  box-shadow: none;

  transition: background .2s ease, color .2s ease, border .2s ease;
}

.icon-btn:hover {
  background: rgba(255,255,255,0.06);
}

.danger {
  color: #ff5c5c;
  text-decoration: none;
  font-size: 13px;
}

.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 20px;
  padding: 10px 14px;
  border-radius: 12px;
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  color: #baffdd;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(8px);
  transition: all .25s ease;
}

.back-btn:hover {
  background: rgba(0,255,136,0.12);
  color: #00ff88;
  transform: translateX(-4px);
  box-shadow: 0 8px 20px rgba(0,255,136,.25);
}

.back-btn {
  position: sticky;
  top: 20px;
}

</style>
</head>

<body>

<div class="page">

<a href="/dashboard" class="back-btn">
  ‚Üê Back to Dashboard
</a>


<h1>Password Manager</h1>

<!-- ADD PASSWORD -->
<form action="/passwords/add" method="POST">
  <div class="card" id="addCard">

    <select id="siteSelect" onchange="handleSiteChange()">
      <option value="custom">Custom</option>
      <option value="netflix">Netflix</option>
      <option value="instagram">Instagram</option>
      <option value="facebook">Facebook</option>
      <option value="snap">Snapchat</option>
      <option value="spotify">Spotify</option>
      <option value="apple">Apple ID</option>
      <option value="gmail">Gmail</option>
      <option value="amazon">Amazon Prime</option>
      <option value="microsoft">Microsoft</option>
    </select>

    <input type="text" id="customSite" name="site_name" placeholder="Site / App Name" required>
    <input type="text" name="login_identifier" placeholder="Username or Email" required>
    <input type="password" name="password" placeholder="Password" required>

    <button id="addBtn">Add Password</button>
  </div>
</form>

<!-- PASSWORD LIST -->
<% passwords.forEach(p => { %>
    <div class="card entry themed-card" data-site="<%= p.site_name.toLowerCase() %>">
    <div class="entry-info">
      <h3><%= p.site_name %></h3>
      <p><%= p.login_identifier %></p>
    </div>

    <div class="password-box">
      <input type="password" value="<%= p.password %>" readonly>
      <button type="button" class="icon-btn" onclick="toggle(this)">üëÅ</button>
      <a href="/passwords/delete/<%= p.id %>" class="danger">Delete</a>
    </div>
  </div>
<% }) %>

</div>

<script>
const themes = {
  netflix:{name:"Netflix",bg:"#0a0000",accent:"#e50914"},
  instagram:{name:"Instagram",bg:"#140012",accent:"#ff77c8"},
  facebook:{name:"Facebook",bg:"#0a1a2f",accent:"#1877f2"},
  snap:{name:"Snapchat",bg:"#1a1a00",accent:"#ffe600"},
  spotify:{name:"Spotify",bg:"#003b1f",accent:"#1db954"},
  apple:{name:"Apple ID",bg:"#1c1c1c",accent:"#ffffff"},
  gmail:{name:"Gmail",bg:"#1b1b1b",accent:"#ffffff"},
  amazon:{name:"Amazon Prime",bg:"#0f2a44",accent:"#00a8e1"},
  microsoft:{name:"Microsoft",bg:"#1b1b1b",accent:"#ffffff"},
  custom:{name:"",bg:"#0a0a0a",accent:"#00ff88"}
};

function handleSiteChange() {
  const sel = siteSelect.value;
  const theme = themes[sel];

  /* Card */
  addCard.style.background =
    `linear-gradient(145deg, ${theme.bg}, #000)`;
  addCard.style.borderColor = theme.accent;

  /* BUTTON ‚Äî single color only */
  addBtn.style.background = theme.accent;
addBtn.style.boxShadow =
  `0 4px 12px ${theme.accent}40`;

  /* Text color for light themes */
  addBtn.style.color =
    theme.accent === "#ffffff" ? "#000" : "#000";

  /* Site name logic */
  if (sel !== "custom") {
    customSite.value = theme.name;
    customSite.readOnly = true;
  } else {
    customSite.value = "";
    customSite.readOnly = false;

    /* Reset custom */
   addBtn.style.background = "#00ff88";
    addBtn.style.boxShadow =
   "0 4px 12px rgba(0,255,136,.25)";

  }
}

function toggle(btn) {
  const input = btn.previousElementSibling;
  input.type = input.type === "password" ? "text" : "password";
}

function applySavedCardThemes() {
  document.querySelectorAll(".themed-card").forEach(card => {
    const site = card.dataset.site;

    for (const key in themes) {
      if (site.includes(key)) {
        const accent = themes[key].accent;

        card.style.background =
          `linear-gradient(145deg, ${themes[key].bg}, #000)`;
        card.style.borderColor = accent;

        /* Apply accent to view button */
        const eyeBtn = card.querySelector(".icon-btn");
        if (eyeBtn) {
          eyeBtn.style.color = accent;
          eyeBtn.style.borderColor = accent + "55";
        }

        break;
      }
    }
  });
}

applySavedCardThemes();


</script>

</body>
</html>
